<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Kemet HR-Expert Resume Builder ðŸ‘”</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">

<style>
:root{ --hr-blue:#004085; --hr-gold:#c69500; --bg:#fdfdfe; --border:#e0e0e0; --error:#bd2130; --success:#155724; }
*{box-sizing:border-box}
body{ margin:0; font-family:'Roboto', sans-serif; height:100vh; display:flex; background:var(--bg); overflow:hidden; }

/* === Editor Panel (HR Dashboard) === */
.editor{ width:45%; background:#fff; padding:30px; overflow-y:auto; border-right:1px solid #ccc; display:flex; flex-direction:column; gap:20px; box-shadow: 2px 0 15px rgba(0,0,0,0.05); }
.preview{ flex:1; padding:40px; background:#525659; overflow-y:auto; display:flex; justify-content:center; }

h2 { color: var(--hr-blue); margin: 0; font-family: 'Merriweather', serif; }
.expert-badge { background: var(--hr-gold); color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; vertical-align: middle; margin-left: 10px; }

/* === ATS Compliance Score === */
.score-dashboard { background: #f8f9fa; border: 1px solid #dee2e6; padding: 15px; border-radius: 8px; display: flex; align-items: center; justify-content: space-between; }
.score-circle { width: 60px; height: 60px; border-radius: 50%; background: white; border: 4px solid var(--hr-blue); display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 18px; color: var(--hr-blue); }
.score-info { flex: 1; margin-left: 15px; }
.score-info h4 { margin: 0 0 5px 0; font-size: 14px; }
.score-info p { margin: 0; font-size: 11px; color: #666; }

/* === HR Expert Inputs === */
label { font-size: 12px; font-weight: 700; color: #333; margin-bottom: 6px; display: block; text-transform: uppercase; }
.input-wrapper { position: relative; }
input, textarea { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 4px; font-size: 14px; transition: 0.2s; background: #fff; }
input:focus, textarea:focus { border-color: var(--hr-blue); outline: none; box-shadow: 0 0 0 3px rgba(0,64,133,0.1); }
textarea { resize: vertical; min-height: 100px; font-family: inherit; line-height: 1.5; }

/* === AI & Validation Feedback === */
.feedback-box { font-size: 12px; margin-top: 5px; min-height: 15px; }
.feedback-error { color: var(--error); display: flex; align-items: center; gap: 5px; }
.feedback-success { color: var(--success); display: flex; align-items: center; gap: 5px; }

.btn-ai {
    background: var(--hr-blue); color: white; border: none; padding: 8px 15px; border-radius: 4px;
    font-size: 12px; font-weight: bold; cursor: pointer; display: inline-flex; align-items: center; gap: 8px;
    transition: 0.3s; margin-bottom: 5px; float: right;
}
.btn-ai:hover { background: #002752; }

/* === Page (A4 - Harvard Template) === */
#page { width: 210mm; min-height: 297mm; background: #fff; padding: 15mm 20mm; box-shadow: 0 0 30px rgba(0,0,0,0.3); color: #000; line-height: 1.4; font-family: 'Times New Roman', Times, serif; }

.cv-name { font-size: 24px; font-weight: bold; text-transform: uppercase; text-align: center; margin-bottom: 5px; }
.cv-contact { text-align: center; font-size: 11px; margin-bottom: 20px; border-bottom: 1px solid #000; padding-bottom: 10px; }
.cv-contact span { margin: 0 5px; }

.cv-section-title { font-size: 14px; font-weight: bold; text-transform: uppercase; border-bottom: 1px solid #000; margin-top: 15px; margin-bottom: 8px; padding-bottom: 2px; }

.cv-entry { margin-bottom: 10px; }
.cv-header-row { display: flex; justify-content: space-between; font-weight: bold; font-size: 12px; }
.cv-sub-row { display: flex; justify-content: space-between; font-style: italic; font-size: 12px; margin-bottom: 4px; }
.cv-list { margin: 0; padding-left: 20px; font-size: 11px; }
.cv-list li { margin-bottom: 3px; }

/* === Print === */
@media print {
 body{ display:block; background:#fff; height:auto; }
 .editor{ display:none; }
 .preview{ padding:0; background:#fff; display:block; }
 #page{ width:100%; padding:0; box-shadow:none; margin:0; }
 @page{ size:A4; margin:15mm 20mm; }
}
</style>
</head>
<body>

<div class="editor">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2>Kemet HR Builder <span class="expert-badge">ATS Expert</span></h2>
    </div>

    <div class="score-dashboard">
        <div class="score-circle" id="atsScore">0%</div>
        <div class="score-info">
            <h4>ATS Compliance Score</h4>
            <p id="atsFeedback">Upload Job Description to start analysis...</p>
        </div>
    </div>

    <div>
        <label>ðŸŽ¯ Target Job Description (Strict Requirement)</label>
        <textarea id="inJD" placeholder="Paste the JD here. The AI will ONLY use keywords found here to prevent hallucination." oninput="analyzeATS()"></textarea>
    </div>

    <div>
        <label>Contact Info</label>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
            <input id="inName" placeholder="Full Name" oninput="updatePreview()">
            <input id="inLoc" placeholder="City, Country" oninput="updatePreview()">
            <input id="inEmail" placeholder="Email" oninput="updatePreview()">
            <input id="inPhone" placeholder="Phone" oninput="updatePreview()">
            <input id="inLink" placeholder="LinkedIn URL" oninput="updatePreview()">
        </div>
    </div>

    <div>
        <label>Professional Experience</label>
        <div id="expList"></div>
        <button onclick="addExp()" style="width:100%; padding:10px; border:1px dashed #999; background:#f9f9f9; cursor:pointer; font-weight:bold;">+ Add Role</button>
    </div>

    <div>
        <label>Education</label>
        <div id="eduList"></div>
        <button onclick="addEdu()" style="width:100%; padding:10px; border:1px dashed #999; background:#f9f9f9; cursor:pointer; font-weight:bold;">+ Add Education</button>
    </div>

    <div>
        <div style="display:flex; justify-content:space-between;">
            <label>Core Competencies (Skills)</label>
            <button class="btn-ai" onclick="extractSkillsFromJD()">Fetch from JD</button>
        </div>
        <textarea id="inSkills" placeholder="Skills will appear here..." oninput="updatePreview()"></textarea>
    </div>

    <button onclick="window.print()" style="margin-top:20px; background:var(--hr-blue); color:#fff; padding:15px; border:none; border-radius:4px; font-weight:bold; font-size:16px; cursor:pointer;">
        Download Certified PDF
    </button>
</div>

<div class="preview">
    <div id="page">
        <div class="cv-name" id="outName">YOUR NAME</div>
        <div class="cv-contact" id="outContact">
            City, Country | email@example.com | +123456789 | linkedin.com/in/me
        </div>

        <div class="cv-section-title">Professional Experience</div>
        <div id="outExp"></div>

        <div class="cv-section-title">Education</div>
        <div id="outEdu"></div>

        <div class="cv-section-title">Skills & Interests</div>
        <div style="font-size:11px;">
            <span style="font-weight:bold;">Skills: </span><span id="outSkills"></span>
        </div>
    </div>
</div>

<script>
// --- HR DICTIONARY (Anti-Fluff) ---
const actionVerbs = {
    'management': ['Orchestrated', 'Spearheaded', 'Directed', 'Optimized', 'Executed'],
    'technical': ['Architected', 'Deployed', 'Engineered', 'Refactored', 'Automated'],
    'creative': ['Conceptualized', 'Designed', 'Revitalized', 'Authored', 'Pioneered'],
    'general': ['Achieved', 'Delivered', 'Improved', 'Increased', 'Reduced']
};

const bannedWords = ['hard worker', 'team player', 'motivated', 'dynamic', 'think outside the box', 'responsible for', 'helped'];

// --- DATA ---
let experiences = [];
let educations = [];

// --- FUNCTIONS ---

function analyzeATS() {
    const jd = document.getElementById('inJD').value.toLowerCase();
    const cv = (document.getElementById('inSkills').value + experiences.map(e=>e.desc).join(' ')).toLowerCase();
    
    // 1. Keyword Match
    const keywords = jd.match(/\b[a-z]{5,}\b/g) || [];
    const uniqueKw = [...new Set(keywords)].filter(w => !['and','the','with','for'].includes(w));
    const total = uniqueKw.length;
    const found = uniqueKw.filter(w => cv.includes(w)).length;
    
    // 2. Score
    const score = total > 0 ? Math.round((found / total) * 100) : 0;
    document.getElementById('atsScore').innerText = score + '%';
    document.getElementById('atsScore').style.color = score > 80 ? '#155724' : (score > 50 ? '#c69500' : '#bd2130');
    document.getElementById('atsScore').style.borderColor = document.getElementById('atsScore').style.color;

    // 3. Feedback
    if(score < 50) document.getElementById('atsFeedback').innerText = "Low Match: Add more keywords from the JD.";
    else if(score < 80) document.getElementById('atsFeedback').innerText = "Good: Try to use stronger action verbs.";
    else document.getElementById('atsFeedback').innerText = "Excellent: Your resume is highly optimized.";
}

// --- THE HR EXPERT AI (Logic-Based) ---
function askHRExpert(index) {
    const jd = document.getElementById('inJD').value;
    if(jd.length < 20) return alert("HR Bot: Please paste the Job Description first. I cannot work without context!");

    // 1. Detect Job Category
    let category = 'general';
    if(jd.includes('manage') || jd.includes('lead')) category = 'management';
    if(jd.includes('code') || jd.includes('develop')) category = 'technical';
    if(jd.includes('design') || jd.includes('art')) category = 'creative';

    // 2. Pick Action Verb
    const verbs = actionVerbs[category];
    const verb = verbs[Math.floor(Math.random() * verbs.length)];

    // 3. Extract Keywords from JD
    const keywords = jd.match(/\b[A-Z][a-z]+\b/g) || []; // Simple noun extraction
    const keyTech = keywords.slice(0, 2).join(" & ");

    // 4. Generate "Google XYZ" Bullet
    const suggestions = [
        `${verb} a critical project using ${keyTech || 'modern tools'}, resulting in a 20% increase in efficiency.`,
        `Collaborated with cross-functional teams to drive ${keyTech || 'strategic goals'}, reducing turnaround time by 15%.`,
        `${verb} workflows related to ${keywords[0] || 'operations'}, ensuring 100% compliance with industry standards.`
    ];
    
    const chosen = suggestions[Math.floor(Math.random() * suggestions.length)];
    
    // 5. Insert
    const current = experiences[index].desc;
    experiences[index].desc = current ? current + "\nâ€¢ " + chosen : "â€¢ " + chosen;
    renderExp();
    updatePreview();
    validateText(experiences[index].desc, `feedback-${index}`);
}

// --- CLICHÃ‰ POLICE (Validator) ---
function validateText(text, elementId) {
    const el = document.getElementById(elementId);
    let foundBad = [];
    bannedWords.forEach(bad => {
        if(text.toLowerCase().includes(bad)) foundBad.push(bad);
    });

    if(foundBad.length > 0) {
        el.className = 'feedback-box feedback-error';
        el.innerHTML = `<i class="fa-solid fa-triangle-exclamation"></i> HR Warning: Avoid using "${foundBad.join(', ')}". Use Action Verbs instead.`;
    } else {
        el.className = 'feedback-box feedback-success';
        el.innerHTML = '<i class="fa-solid fa-check"></i> HR Approved: Strong language used.';
    }
}

function extractSkillsFromJD() {
    const jd = document.getElementById('inJD').value;
    if(!jd) return alert("HR Bot: No JD found!");
    
    const words = jd.match(/\b[A-Z][a-zA-Z]+\b/g); // Find Capitalized words usually Skills
    const uniq = [...new Set(words)].filter(w => w.length > 3).slice(0, 15);
    document.getElementById('inSkills').value = uniq.join(", ");
    updatePreview();
    analyzeATS();
}

// --- DYNAMIC SECTIONS ---
function addExp() {
    experiences.push({ role:'', comp:'', date:'', desc:'' });
    renderExp();
}

function renderExp() {
    document.getElementById('expList').innerHTML = experiences.map((e,i) => `
        <div style="background:#f8f9fa; padding:15px; border:1px solid #eee; margin-bottom:10px; position:relative;">
            <button onclick="askHRExpert(${i})" class="btn-ai">
                <i class="fa-solid fa-user-tie"></i> Ask HR Expert
            </button>
            <i class="fa-solid fa-trash" style="color:red; cursor:pointer; position:absolute; top:10px; left:10px;" onclick="experiences.splice(${i},1); renderExp(); updatePreview()"></i>
            
            <input placeholder="Job Title" value="${e.role}" oninput="experiences[${i}].role=this.value; updatePreview()" style="margin-bottom:5px; font-weight:bold;">
            <div style="display:flex; gap:10px;">
                <input placeholder="Company" value="${e.comp}" oninput="experiences[${i}].comp=this.value; updatePreview()">
                <input placeholder="Date" value="${e.date}" oninput="experiences[${i}].date=this.value; updatePreview()">
            </div>
            <textarea placeholder="â€¢ Achievement 1..." oninput="experiences[${i}].desc=this.value; updatePreview(); validateText(this.value, 'feedback-${i}')">${e.desc}</textarea>
            <div id="feedback-${i}" class="feedback-box"></div>
        </div>
    `).join('');
    updatePreview();
}

function addEdu() {
    educations.push({ deg:'', school:'', date:'' });
    renderEdu();
}

function renderEdu() {
    document.getElementById('eduList').innerHTML = educations.map((e,i) => `
        <div style="background:#f8f9fa; padding:10px; border:1px solid #eee; margin-bottom:10px;">
            <input placeholder="Degree" value="${e.deg}" oninput="educations[${i}].deg=this.value; updatePreview()" style="font-weight:bold; margin-bottom:5px;">
            <div style="display:flex; gap:10px;">
                <input placeholder="University" value="${e.school}" oninput="educations[${i}].school=this.value; updatePreview()">
                <input placeholder="Year" value="${e.date}" oninput="educations[${i}].date=this.value; updatePreview()">
            </div>
        </div>
    `).join('');
    updatePreview();
}

function updatePreview() {
    // Header
    document.getElementById('outName').innerText = document.getElementById('inName').value || 'YOUR NAME';
    
    const contact = [
        document.getElementById('inLoc').value,
        document.getElementById('inEmail').value,
        document.getElementById('inPhone').value,
        document.getElementById('inLink').value
    ].filter(Boolean).join(" | ");
    document.getElementById('outContact').innerText = contact;

    // Experience
    document.getElementById('outExp').innerHTML = experiences.map(e => `
        <div class="cv-entry">
            <div class="cv-header-row"><span>${e.role}</span><span>${e.date}</span></div>
            <div class="cv-sub-row"><span>${e.comp}</span></div>
            <ul class="cv-list">${e.desc.split('\n').filter(x=>x).map(x=>x.trim().startsWith('â€¢')?`<li>${x.replace('â€¢','').trim()}</li>`:`<li>${x}</li>`).join('')}</ul>
        </div>
    `).join('');

    // Education
    document.getElementById('outEdu').innerHTML = educations.map(e => `
        <div class="cv-entry">
            <div class="cv-header-row"><span>${e.deg}</span><span>${e.date}</span></div>
            <div class="cv-sub-row"><span>${e.school}</span></div>
        </div>
    `).join('');

    // Skills
    document.getElementById('outSkills').innerText = document.getElementById('inSkills').value;
    
    analyzeATS();
}

// Init
addExp();
</script>

</body>
</html>
