<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Kemet Enterprise ATS Architect (V18)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    /* === CORE VARIABLES === */
    :root { 
        --sidebar-bg: #1e293b; --sidebar-text: #e2e8f0; --accent: #3b82f6; 
        --success: #10b981; --warning: #f59e0b; --danger: #ef4444;
        --page-bg: #525659; --paper: #ffffff;
    }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: 'Segoe UI', sans-serif; height: 100vh; display: flex; overflow: hidden; }

    /* === 1. LEFT PANEL (The Command Center) === */
    .sidebar { 
        width: 450px; background: var(--sidebar-bg); color: var(--sidebar-text); 
        display: flex; flex-direction: column; border-right: 1px solid #334155; 
        overflow-y: auto; z-index: 10;
    }
    .header { 
        padding: 20px; border-bottom: 1px solid #334155; background: #0f172a; 
        position: sticky; top: 0; z-index: 20;
    }
    .header h2 { margin: 0; font-size: 18px; display: flex; align-items: center; gap: 10px; color: var(--accent); }
    .header small { color: #94a3b8; font-size: 11px; }

    /* Score Bar */
    .ats-meter { margin-top: 10px; background: #334155; height: 8px; border-radius: 4px; overflow: hidden; }
    .ats-fill { height: 100%; width: 0%; background: var(--danger); transition: 0.5s; }
    .score-text { font-size: 12px; font-weight: bold; margin-top: 5px; display: flex; justify-content: space-between; }

    /* Form Elements */
    .form-section { padding: 15px; border-bottom: 1px solid #334155; }
    .sec-title { 
        font-size: 12px; font-weight: 700; text-transform: uppercase; 
        color: #94a3b8; margin-bottom: 10px; letter-spacing: 1px; 
    }
    
    label { font-size: 11px; font-weight: 600; display: block; margin-bottom: 4px; color: #cbd5e1; }
    input, textarea, select { 
        width: 100%; background: #0f172a; border: 1px solid #334155; 
        color: white; padding: 10px; border-radius: 4px; font-size: 13px; 
        font-family: inherit; margin-bottom: 10px; transition: 0.2s;
    }
    input:focus, textarea:focus { border-color: var(--accent); outline: none; background: #1e293b; }
    textarea { resize: vertical; min-height: 80px; }

    /* Keyword Tags */
    .kw-cloud { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 10px; }
    .kw-tag { 
        font-size: 10px; padding: 3px 8px; border-radius: 4px; 
        background: #334155; color: #94a3b8; border: 1px solid #475569; 
    }
    .kw-tag.found { background: rgba(16, 185, 129, 0.2); color: var(--success); border-color: var(--success); }
    .kw-tag.missing { background: rgba(239, 68, 68, 0.1); color: var(--danger); border-color: var(--danger); }

    /* Action Buttons */
    .btn { 
        width: 100%; padding: 10px; border: none; border-radius: 4px; 
        font-weight: 600; cursor: pointer; font-size: 13px; display: flex; 
        align-items: center; justify-content: center; gap: 8px; margin-top: 5px;
    }
    .btn-primary { background: var(--accent); color: white; }
    .btn-primary:hover { background: #2563eb; }
    .btn-outline { background: transparent; border: 1px dashed #475569; color: #94a3b8; }
    .btn-outline:hover { border-color: var(--accent); color: var(--accent); }
    
    .ai-tool { background: linear-gradient(90deg, #4f46e5, #7c3aed); color: white; border: none; font-size: 11px; padding: 5px 10px; border-radius: 20px; cursor: pointer; margin-bottom: 5px; display: inline-flex; align-items: center; gap: 5px; }
    .ai-tool:hover { opacity: 0.9; }

    /* === 2. PREVIEW PANEL (The Paper) === */
    .preview { flex: 1; background: var(--page-bg); padding: 40px; overflow-y: auto; display: flex; justify-content: center; }
    
    #resume-page {
        width: 210mm; min-height: 297mm; background: var(--paper); 
        padding: 15mm 20mm; color: #000; box-shadow: 0 0 20px rgba(0,0,0,0.5);
        font-family: 'Times New Roman', Times, serif; line-height: 1.4;
    }

    /* Resume Typography (Strict ATS) */
    .cv-name { font-size: 26px; font-weight: bold; text-transform: uppercase; text-align: center; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 10px; }
    .cv-contact { text-align: center; font-size: 11px; margin-bottom: 20px; }
    .cv-sec-head { font-size: 14px; font-weight: bold; text-transform: uppercase; border-bottom: 1px solid #000; margin: 15px 0 10px 0; }
    .cv-item { margin-bottom: 12px; }
    .cv-row { display: flex; justify-content: space-between; font-weight: bold; font-size: 12px; }
    .cv-sub { font-style: italic; font-size: 12px; margin-bottom: 3px; }
    .cv-list { margin: 0; padding-left: 18px; font-size: 11px; }
    .cv-list li { margin-bottom: 2px; }

    /* Print Mode */
    @media print {
        body { display: block; background: white; height: auto; }
        .sidebar { display: none; }
        .preview { padding: 0; display: block; }
        #resume-page { width: 100%; box-shadow: none; margin: 0; padding: 0; }
        @page { size: A4; margin: 15mm 20mm; }
    }
</style>
</head>
<body>

<div class="sidebar">
    <div class="header">
        <h2><i class="fa-solid fa-layer-group"></i> Kemet Enterprise <span style="font-size:10px; background:var(--accent); color:white; padding:2px 6px; border-radius:4px;">V18</span></h2>
        
        <div class="ats-meter"><div class="ats-fill" id="atsBar"></div></div>
        <div class="score-text">
            <span>ATS Match Rate</span>
            <span id="atsScore">0%</span>
        </div>
    </div>

    <div class="form-section">
        <div class="sec-title">üéØ Target Analysis (Paste JD)</div>
        <textarea id="jdInput" placeholder="Paste the Job Description here to activate the Keyword Radar..." oninput="analyzeKeywords()"></textarea>
        <div id="keywordRadar" class="kw-cloud">
            </div>
    </div>

    <div class="form-section">
        <div class="sec-title">üë§ Candidate Profile</div>
        <input id="inName" placeholder="Full Name" oninput="updateCV()">
        <input id="inTitle" placeholder="Current Job Title" list="jobList" oninput="updateCV()">
        <datalist id="jobList">
            </datalist>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <input id="inPhone" placeholder="Phone" oninput="updateCV()">
            <input id="inLoc" placeholder="City, Country" oninput="updateCV()">
        </div>
        <input id="inEmail" placeholder="Email" oninput="updateCV()">
        <input id="inLink" placeholder="LinkedIn / Portfolio" oninput="updateCV()">
    </div>

    <div class="form-section">
        <div class="sec-title">üìù Summary</div>
        <button class="ai-tool" onclick="generateSummary()"><i class="fa-solid fa-magic"></i> AI Generate</button>
        <textarea id="inSum" placeholder="Professional summary..." oninput="updateCV()"></textarea>
    </div>

    <div class="form-section">
        <div class="sec-title">üíº Experience</div>
        <div id="expContainer"></div>
        <button class="btn btn-outline" onclick="addExp()">+ Add Position</button>
    </div>

    <div class="form-section">
        <div class="sec-title">üéì Education</div>
        <div id="eduContainer"></div>
        <button class="btn btn-outline" onclick="addEdu()">+ Add Education</button>
    </div>

    <div class="form-section">
        <div class="sec-title">üõ†Ô∏è Skills</div>
        <button class="ai-tool" onclick="extractSkillsFromJD()"><i class="fa-solid fa-magnet"></i> Extract from JD</button>
        <textarea id="inSkills" placeholder="Python, Java, Leadership..." oninput="updateCV()"></textarea>
    </div>

    <div class="form-section">
        <button class="btn btn-primary" onclick="window.print()">
            <i class="fa-solid fa-file-pdf"></i> Download Official PDF
        </button>
    </div>
</div>

<div class="preview">
    <div id="resume-page">
        <div class="cv-name" id="outName">Your Name</div>
        <div class="cv-contact" id="outContact">Contact Info</div>

        <div class="cv-sec-head">Professional Summary</div>
        <p style="font-size:11px; margin:0;" id="outSum"></p>

        <div class="cv-sec-head">Professional Experience</div>
        <div id="outExp"></div>

        <div class="cv-sec-head">Education</div>
        <div id="outEdu"></div>

        <div class="cv-sec-head">Skills</div>
        <p style="font-size:11px; margin:0;" id="outSkills"></p>
    </div>
</div>

<script>
/* =========================================
   DATABASE & CONFIGURATION
   ========================================= */
// 1. Top 500+ Universities & Regions (Offline Database)
const universities = [
    "Cairo University", "Ain Shams University", "Alexandria University", "Mansoura University", 
    "Assiut University", "Helwan University", "Zagazig University", "Tanta University",
    "American University in Cairo (AUC)", "German University in Cairo (GUC)", "British University in Egypt (BUE)",
    "Harvard University", "Stanford University", "MIT", "Oxford University", "Cambridge University",
    "King Saud University", "King Abdulaziz University", "United Arab Emirates University",
    "Addis Ababa University", "University of Nairobi", "University of Lagos", "University of Cape Town"
    // ... ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ŸäŸÖŸÉŸÜ ÿ≤ŸäÿßÿØÿ™Ÿáÿß ŸÑŸÑÿ¢ŸÑÿßŸÅ ÿØŸàŸÜ ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ± ÿπŸÑŸâ ÿßŸÑÿ≥ÿ±ÿπÿ©
];

// 2. High-Impact Keyword Library (The Keyword Radar)
const hardSkills = [
    "Python","Java","SQL","HTML","CSS","JavaScript","React","Angular","Node.js","AWS","Azure",
    "Docker","Kubernetes","Git","Agile","Scrum","JIRA","SEO","SEM","Google Analytics","CRM",
    "Salesforce","SAP","Oracle","Photoshop","Illustrator","AutoCAD","Revit","Accounting","Auditing",
    "Budgeting","Forecasting","HRIS","Recruiting","Payroll","Logistics","Supply Chain","Negotiation"
];

// 3. AI Sentence Builder Templates
const aiTemplates = {
    'dev': "Developed [Feature] using [Tech Stack], reducing load time by [Number]%.",
    'mgr': "Led a team of [Number] to execute [Project], increasing revenue by [Number]%.",
    'sales': "Achieved [Number]% of sales target by implementing [Strategy] in [Region].",
    'gen': "Improved [Process] by [Action], resulting in [Result]."
};

/* =========================================
   CORE LOGIC
   ========================================= */
let expCount = 0;
let eduCount = 0;

// Initialize
window.onload = function() {
    addExp(); 
    addEdu();
    // Populate Job Titles
    const jobs = ["Software Engineer","Product Manager","Accountant","HR Specialist","Sales Manager","Civil Engineer"];
    const dl = document.getElementById('jobList');
    jobs.forEach(j => { let op = document.createElement('option'); op.value=j; dl.appendChild(op); });
};

// --- DATA BINDING ---
function updateCV() {
    // Basic Info
    setText('outName', 'inName', 'YOUR NAME');
    
    // Contact Line
    const contact = [
        val('inLoc'), val('inPhone'), val('inEmail'), val('inLink')
    ].filter(Boolean).join(" | ");
    document.getElementById('outContact').innerText = contact;

    // Summary & Skills
    setText('outSum', 'inSum', '');
    setText('outSkills', 'inSkills', '');

    // Analyze Keywords Live
    analyzeKeywords();
}

// --- DYNAMIC SECTIONS ---
function addExp() {
    expCount++;
    const div = document.createElement('div');
    div.className = 'form-section';
    div.style.background = '#162032'; // Slightly different bg
    div.innerHTML = `
        <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
            <label style="color:var(--accent)">Position #${expCount}</label>
            <i class="fa-solid fa-trash" style="color:var(--danger); cursor:pointer;" onclick="this.parentElement.parentElement.remove(); renderExp();"></i>
        </div>
        <input class="exp-role" placeholder="Job Title" oninput="renderExp()">
        <input class="exp-comp" placeholder="Company Name" oninput="renderExp()">
        <input class="exp-date" placeholder="Date (e.g. 2020 - Present)" oninput="renderExp()">
        <div style="position:relative;">
            <textarea class="exp-desc" placeholder="‚Ä¢ Key achievement..." oninput="renderExp()"></textarea>
            <button class="ai-tool" style="position:absolute; bottom:5px; right:5px;" onclick="injectBullet(this)">
                <i class="fa-solid fa-wand-magic-sparkles"></i> Build Bullet
            </button>
        </div>
    `;
    document.getElementById('expContainer').appendChild(div);
}

function renderExp() {
    const container = document.getElementById('outExp');
    container.innerHTML = '';
    
    document.querySelectorAll('#expContainer .form-section').forEach(el => {
        const role = el.querySelector('.exp-role').value;
        const comp = el.querySelector('.exp-comp').value;
        const date = el.querySelector('.exp-date').value;
        const desc = el.querySelector('.exp-desc').value;
        
        if(role || comp) {
            container.innerHTML += `
                <div class="cv-item">
                    <div class="cv-row"><span>${role}</span><span>${date}</span></div>
                    <div class="cv-sub">${comp}</div>
                    <ul class="cv-list">${desc.split('\n').map(l => l ? `<li>${l}</li>` : '').join('')}</ul>
                </div>
            `;
        }
    });
    analyzeKeywords(); // Update score
}

function addEdu() {
    const div = document.createElement('div');
    div.className = 'form-section';
    div.style.background = '#162032';
    div.innerHTML = `
        <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
            <label style="color:var(--success)">Education</label>
            <i class="fa-solid fa-trash" style="color:var(--danger); cursor:pointer;" onclick="this.parentElement.parentElement.remove(); renderEdu();"></i>
        </div>
        <input class="edu-deg" placeholder="Degree" oninput="renderEdu()">
        
        <input class="edu-uni" list="uniList" placeholder="University (Start typing...)" oninput="renderEdu()">
        <datalist id="uniList">
            ${universities.map(u => `<option value="${u}">`).join('')}
        </datalist>

        <input class="edu-date" placeholder="Year" oninput="renderEdu()">
    `;
    document.getElementById('eduContainer').appendChild(div);
}

function renderEdu() {
    const container = document.getElementById('outEdu');
    container.innerHTML = '';
    document.querySelectorAll('#eduContainer .form-section').forEach(el => {
        const deg = el.querySelector('.edu-deg').value;
        const uni = el.querySelector('.edu-uni').value;
        const date = el.querySelector('.edu-date').value;
        
        if(deg || uni) {
            container.innerHTML += `
                <div class="cv-item">
                    <div class="cv-row"><span>${deg}</span><span>${date}</span></div>
                    <div class="cv-sub">${uni}</div>
                </div>
            `;
        }
    });
}

// --- AI & INTELLIGENCE ---

function analyzeKeywords() {
    const jdText = val('jdInput').toLowerCase();
    const cvText = document.getElementById('resume-page').innerText.toLowerCase();
    const radar = document.getElementById('keywordRadar');
    
    if(jdText.length < 10) {
        radar.innerHTML = '<small style="color:#64748b">Waiting for JD...</small>';
        updateScore(0);
        return;
    }

    // 1. Find Hard Skills in JD
    const foundInJD = hardSkills.filter(s => jdText.includes(s.toLowerCase()));
    
    // 2. Check if present in CV
    let matched = 0;
    radar.innerHTML = foundInJD.map(kw => {
        const isPresent = cvText.includes(kw.toLowerCase());
        if(isPresent) matched++;
        return `<span class="kw-tag ${isPresent ? 'found' : 'missing'}">${kw}</span>`;
    }).join('');

    // 3. Simple Frequency Match
    const score = foundInJD.length > 0 ? Math.round((matched / foundInJD.length) * 100) : 50;
    updateScore(score);
}

function updateScore(score) {
    const bar = document.getElementById('atsBar');
    const txt = document.getElementById('atsScore');
    
    bar.style.width = score + '%';
    bar.style.background = score > 80 ? 'var(--success)' : (score > 50 ? 'var(--warning)' : 'var(--danger)');
    txt.innerText = score + '%';
    txt.style.color = bar.style.background;
}

// AI Bullet Builder
function injectBullet(btn) {
    const textarea = btn.parentElement.querySelector('textarea');
    const role = val('inTitle').toLowerCase();
    
    let template = aiTemplates.gen;
    if(role.includes('developer') || role.includes('engineer')) template = aiTemplates.dev;
    else if(role.includes('manager') || role.includes('lead')) template = aiTemplates.mgr;
    else if(role.includes('sales')) template = aiTemplates.sales;

    // Insert at cursor or end
    const current = textarea.value;
    textarea.value = current + (current ? '\n' : '') + "‚Ä¢ " + template;
    renderExp();
}

function extractSkillsFromJD() {
    const jd = val('jdInput').toLowerCase();
    if(jd.length < 10) return alert("Please paste a Job Description first!");
    
    const found = hardSkills.filter(s => jd.includes(s.toLowerCase()));
    document.getElementById('inSkills').value = found.join(", ");
    updateCV();
}

// Generate Summary using "Logic AI"
function generateSummary() {
    const title = val('inTitle') || "Professional";
    const skills = val('inSkills');
    
    const summary = `Results-oriented ${title} with proven expertise in ${skills || 'key industry domains'}. Dedicated to driving operational excellence and delivering high-quality solutions. Looking to leverage skills in a challenging environment.`;
    
    document.getElementById('inSum').value = summary;
    updateCV();
}

// Helper
function val(id) { return document.getElementById(id).value; }
function setText(oid, iid, def) { document.getElementById(oid).innerText = val(iid) || def; }

</script>

</body>
    </html>
    
