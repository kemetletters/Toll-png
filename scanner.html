<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kemet Executive Suite V14 ğŸ’</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root { --primary: #1a252f; --accent: #c0392b; --pass: #27ae60; --avg: #f39c12; --fail: #c0392b; --bg: #ecf0f1; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); margin: 0; padding: 15px; color: #2c3e50; }
        .container { max-width: 900px; margin: 0 auto; }
        
        /* Tabs System */
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; }
        .tab-btn { flex: 1; padding: 15px; background: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; transition: 0.3s; color: #7f8c8d; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .tab-btn.active { background: var(--primary); color: white; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* Scanner Box */
        .box { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; }
        .input-group { display: flex; flex-direction: column; gap: 10px; margin-top: 15px; }
        input, select { padding: 12px; border: 2px solid #bdc3c7; border-radius: 8px; font-size: 15px; width: 100%; box-sizing: border-box; }
        .btn-action { background: var(--accent); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; font-size: 16px; transition: 0.3s; }
        .btn-action:hover { background: #a93226; }

        /* Report Styles */
        .grade-banner { text-align: center; padding: 20px; background: #fdfefe; border: 1px solid #eee; border-radius: 10px; margin-bottom: 20px; }
        .final-badge { font-size: 48px; font-weight: 900; color: var(--primary); display: inline-block; padding: 5px 25px; border-radius: 12px; background: #ecf0f1; }
        
        .metrics-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 25px; }
        @media(max-width:600px){ .metrics-grid { grid-template-columns: repeat(2, 1fr); } }
        .metric-item { text-align: center; background: #fff; padding: 10px; border-radius: 8px; border: 1px solid #eee; }
        .chart-tiny { width: 60px; height: 60px; margin: 0 auto; position: relative; }
        .chart-val { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); font-weight: bold; }

        /* Action Plan Section */
        .action-plan { border: 2px solid var(--primary); border-radius: 10px; overflow: hidden; margin-top: 30px; }
        .plan-head { background: var(--primary); color: white; padding: 15px; font-weight: bold; font-size: 18px; display: flex; align-items: center; gap: 10px; }
        .plan-body { padding: 20px; background: #fff; }
        .issue-card { display: flex; align-items: flex-start; gap: 15px; padding: 15px; border-bottom: 1px solid #eee; }
        .issue-card:last-child { border-bottom: none; }
        .issue-icon { font-size: 24px; }
        .issue-content h4 { margin: 0 0 5px 0; color: #c0392b; }
        .issue-content p { margin: 0; font-size: 13px; color: #555; }
        .fix-badge { display: inline-block; background: #e8f8f5; color: #27ae60; padding: 3px 8px; border-radius: 4px; font-size: 11px; font-weight: bold; margin-top: 5px; }

        /* Keyword Tool */
        .kw-results { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; margin-top: 20px; }
        .kw-tag { background: #eaf2f8; color: #2980b9; padding: 10px; border-radius: 6px; font-size: 13px; font-weight: bold; display: flex; justify-content: space-between; align-items: center; border: 1px solid #d6eaf8; }
        .kw-copy { cursor: pointer; font-size: 16px; opacity: 0.5; }
        .kw-copy:hover { opacity: 1; }

        .loader { display: none; text-align: center; padding: 30px; }
    </style>
</head>
<body>

<div class="container">
    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('scanTab')">ğŸ” ÙØ­Øµ Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Scanner)</button>
        <button class="tab-btn" onclick="switchTab('kwTab')">ğŸ”‘ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©</button>
    </div>

    <div id="scanTab" class="tab-content active">
        <div class="box">
            <h2 style="margin-top:0;">Kemet Site Audit</h2>
            <div class="input-group">
                <input type="text" id="apiKey" placeholder="Google API Key (Required)">
                <input type="text" id="url" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹ (kemetletters.com)">
                <button class="btn-action" onclick="runScan()">ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ ÙˆØªÙ†ÙÙŠØ° Ø§Ù„ØªØ­Ù„ÙŠÙ„</button>
            </div>
        </div>

        <div id="loader" class="loader">â³ Ø¬Ø§Ø±ÙŠ Ø³Ø­Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„...</div>

        <div id="reportContainer" style="display:none;">
            <div id="printArea" style="background:white; padding:20px; border-radius:10px;">
                
                <div style="display:flex; justify-content:space-between; margin-bottom:20px; border-bottom:2px solid #333; padding-bottom:10px;">
                    <div><h2 style="margin:0;">ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„</h2><small id="rDate"></small></div>
                    <div style="text-align:left;"><h3 style="margin:0;">KEMET SCAN</h3><small>Executive Report</small></div>
                </div>

                <div class="grade-banner">
                    <div>Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¹Ø§Ù…</div>
                    <div id="finalGrade" class="final-badge">-</div>
                    <div class="metrics-grid" style="margin-top:20px;">
                        <div class="metric-item"><div class="chart-tiny"><canvas id="c1"></canvas><span class="chart-val" id="s1">0</span></div><small>Performance</small></div>
                        <div class="metric-item"><div class="chart-tiny"><canvas id="c2"></canvas><span class="chart-val" id="s2">0</span></div><small>SEO</small></div>
                        <div class="metric-item"><div class="chart-tiny"><canvas id="c3"></canvas><span class="chart-val" id="s3">0</span></div><small>Accessibility</small></div>
                        <div class="metric-item"><div class="chart-tiny"><canvas id="c4"></canvas><span class="chart-val" id="s4">0</span></div><small>Practices</small></div>
                    </div>
                </div>

                <div class="action-plan">
                    <div class="plan-head">ğŸ› ï¸ Ø®Ø·Ø© Ø§Ù„Ø¥ØµÙ„Ø§Ø­ (Action Plan)</div>
                    <div class="plan-body" id="issuesList">
                        </div>
                </div>

                <h3 style="margin-top:30px; border-bottom:1px solid #eee; padding-bottom:10px;">ğŸ“Š Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ© (Core Vitals)</h3>
                <div id="techDetails" style="font-size:13px; color:#555;"></div>

            </div>
            <button class="btn-action" style="background:#2c3e50; margin-top:20px;" onclick="pdf()">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± (PDF)</button>
        </div>
    </div>

    <div id="kwTab" class="tab-content">
        <div class="box">
            <h2 style="margin-top:0;">Ù…ÙˆÙ„Ù‘Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© (Kemet Keywords)</h2>
            <p style="font-size:14px; color:#666;">Ø£Ø¯Ø§Ø© ØªÙˆÙ„ÙŠØ¯ ÙƒÙ„Ù…Ø§Øª Ø®Ø§ØµØ© Ø¨Ù†ÙŠØ´ "Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª ÙƒÙŠÙ…ÙŠØª" ÙˆØ§Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©.</p>
            <div class="input-group">
                <input type="text" id="seedKw" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© (Ù…Ø«Ø§Ù„: necklace, gold, pharaonic)">
                <button class="btn-action" onclick="genKeywords()">ğŸ”¥ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª</button>
            </div>
            <div id="kwOutput" class="kw-results"></div>
        </div>
    </div>

</div>

<script>
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ÙØªØ§Ø­
    window.onload = () => { if(localStorage.getItem('kKey')) document.getElementById('apiKey').value = localStorage.getItem('kKey'); };
    function switchTab(id){ document.querySelectorAll('.tab-content').forEach(d=>d.classList.remove('active')); document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active')); document.getElementById(id).classList.add('active'); event.target.classList.add('active'); }

    // --- SCANNER LOGIC ---
    async function runScan(){
        const k = document.getElementById('apiKey').value.trim();
        let u = document.getElementById('url').value.trim();
        if(!k || !u) return alert("Ù…Ø·Ù„ÙˆØ¨ API Key ÙˆØ§Ù„Ø±Ø§Ø¨Ø·");
        
        localStorage.setItem('kKey', k);
        if(!u.startsWith('http')) u = 'https://'+u;

        document.getElementById('loader').style.display='block';
        document.getElementById('reportContainer').style.display='none';

        try {
            const r = await fetch(`https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url=${u}&key=${k}&strategy=mobile&category=PERFORMANCE&category=SEO&category=ACCESSIBILITY&category=BEST_PRACTICES`);
            const d = await r.json();
            if(d.error) throw new Error(d.error.message);
            renderReport(d.lighthouseResult);
        } catch(e) { alert(e.message); } 
        finally { document.getElementById('loader').style.display='none'; }
    }

    function renderReport(lh){
        document.getElementById('reportContainer').style.display='block';
        document.getElementById('rDate').innerText = new Date().toLocaleString();
        
        const cat = lh.categories;
        const p = Math.round(cat.performance.score*100);
        const s = Math.round(cat.seo.score*100);
        const a = Math.round(cat.accessibility.score*100);
        const b = Math.round(cat['best-practices'].score*100);

        // Final Grade
        const avg = (p+s+a+b)/4;
        const badge = document.getElementById('finalGrade');
        badge.innerText = avg>=90?'A':avg>=75?'B':avg>=60?'C':'F';
        badge.style.color = avg>=90?'#27ae60':avg>=60?'#f39c12':'#c0392b';

        // Charts
        draw('c1','s1',p); draw('c2','s2',s); draw('c3','s3',a); draw('c4','s4',b);

        // --- Action Plan Generator (Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ø°ÙƒÙŠ) ---
        let issues = "";
        
        // 1. Content & Conversion Logic (Ù…Ø­Ø§ÙƒØ§Ø© ShopScan)
        // Ù†Ø³ØªØ®Ø¯Ù… SEO score ÙƒÙ…Ø¤Ø´Ø± Ù„Ù„Ù…Ø­ØªÙˆÙ‰
        if(s < 90) {
            issues += createIssue('ğŸ“', 'Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø© Ø¶Ø¹ÙŠÙ (Low Content)', 'Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ù‚Ù„ÙŠÙ„ Ø¬Ø¯Ø§Ù‹ (Ø£Ù‚Ù„ Ù…Ù† 300 ÙƒÙ„Ù…Ø©). Ø¬ÙˆØ¬Ù„ ÙŠÙØ¶Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØºÙ†ÙŠ.', 'Ø§Ù„Ø­Ù„: Ø£Ø¶Ù ÙˆØµÙØ§Ù‹ Ø¯Ù‚ÙŠÙ‚Ø§Ù‹ Ù„ÙƒÙ„ Ù…Ù†ØªØ¬ Ù„Ø§ ÙŠÙ‚Ù„ Ø¹Ù† 100 ÙƒÙ„Ù…Ø©.');
            issues += createIssue('ğŸ·ï¸', 'ØµÙˆØ± Ø¨Ø¯ÙˆÙ† ÙˆØµÙ (Missing Alt Text)', 'Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø« Ù„Ø§ ØªØ±Ù‰ ØµÙˆØ±Ùƒ.', 'Ø§Ù„Ø­Ù„: Ø§ÙƒØªØ¨ ÙˆØµÙØ§Ù‹ ÙÙŠ Ø®Ø§Ù†Ø© Alt Text Ù„ÙƒÙ„ ØµÙˆØ±Ø©.');
        }
        
        // 2. Conversion Logic (Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Best Practices)
        if(b < 90) {
            issues += createIssue('â­', 'Ø¹ÙˆØ§Ù…Ù„ Ø§Ù„Ø«Ù‚Ø© Ù…ÙÙ‚ÙˆØ¯Ø© (Missing Trust)', 'Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠÙØªÙ‚Ø± Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø·Ù…Ø£Ù†ÙŠÙ†Ø©.', 'Ø§Ù„Ø­Ù„: Ø£Ø¶Ù ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (Reviews) ÙˆØ³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ ÙˆØ§Ø¶Ø­Ø©.');
        }

        // 3. Performance Logic
        if(p < 80) {
            issues += createIssue('ğŸš€', 'Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø·ÙŠØ¡ (Slow LCP)', `Ø²Ù…Ù† Ø§Ù„ØªØ­Ù…ÙŠÙ„ ${lh.audits['largest-contentful-paint'].displayValue}.`, 'Ø§Ù„Ø­Ù„: Ø­ÙˆÙ„ Ø§Ù„ØµÙˆØ± Ù„ØµÙŠØºØ© WebP ÙˆÙ‚Ù„Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©.');
            issues += createIssue('ğŸ“', 'Ø§Ù‡ØªØ²Ø§Ø² Ø§Ù„Ù…Ø­ØªÙˆÙ‰ (CLS Issue)', 'Ø§Ù„ØµÙØ­Ø© ØªÙ‡ØªØ² Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„.', 'Ø§Ù„Ø­Ù„: Ø­Ø¯Ø¯ Ø£Ø¨Ø¹Ø§Ø¯ (Width/Height) Ù„ÙƒÙ„ Ø§Ù„ØµÙˆØ± ÙÙŠ Ø§Ù„ÙƒÙˆØ¯.');
        }

        if(issues === "") issues = "<p style='text-align:center; color:green;'>âœ… Ù…ÙˆÙ‚Ø¹Ùƒ Ù…Ù…ØªØ§Ø²! Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§ÙƒÙ„ Ø­Ø±Ø¬Ø©.</p>";
        document.getElementById('issuesList').innerHTML = issues;

        // Tech Details
        document.getElementById('techDetails').innerHTML = `
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                <div><b>FCP:</b> ${lh.audits['first-contentful-paint'].displayValue}</div>
                <div><b>CLS:</b> ${lh.audits['cumulative-layout-shift'].displayValue}</div>
                <div><b>Total Size:</b> ${(lh.audits['total-byte-weight'].numericValue/1024/1024).toFixed(2)} MB</div>
                <div><b>HTTPS:</b> ${lh.audits['is-on-https'].score===1?'Yes':'No'}</div>
            </div>
        `;
    }

    function createIssue(icon, title, desc, fix){
        return `
        <div class="issue-card">
            <div class="issue-icon">${icon}</div>
            <div class="issue-content">
                <h4>${title}</h4>
                <p>${desc}</p>
                <span class="fix-badge">${fix}</span>
            </div>
        </div>`;
    }

    // --- KEYWORD TOOL LOGIC ---
    function genKeywords(){
        const seed = document.getElementById('seedKw').value.toLowerCase().trim();
        if(!seed) return alert("Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ø£ÙˆÙ„Ø§Ù‹");
        
        // Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª ÙƒÙ„Ù…Ø§Øª (Ù…Ø­Ø§ÙƒØ§Ø© Ø°ÙƒÙŠØ© Ù„Ù„Ù†ÙŠØ´ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ)
        const prefixes = ["Best", "Custom", "Handmade", "Gold", "Silver", "Ancient", "Pharaonic", "Luxury", "Personalized"];
        const suffixes = ["Necklace", "Jewelry", "Pendant", "Ring", "Bracelet", "Cartouche", "Gift", "Art", "Symbols"];
        const extras = ["for her", "for him", "with name", "meaning", "from Egypt", "shop online", "store"];

        let results = [];
        
        // 1. Ø®Ù„Ø· Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø© Ù…Ø¹ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
        if(seed.includes("kemet") || seed.includes("egypt")){
            results.push(`${seed} jewelry meaning`);
            results.push(`${seed} necklace gold`);
            results.push(`custom ${seed} cartouche`);
        }
        
        // ØªÙˆÙ„ÙŠØ¯ ØªØ¨Ø§Ø¯ÙŠÙ„ ÙˆØªÙˆØ§ÙÙŠÙ‚ (Permutations)
        for(let p of prefixes) results.push(`${p} ${seed}`);
        for(let s of suffixes) results.push(`${seed} ${s}`);
        for(let e of extras) results.push(`${seed} ${e}`);
        
        // Ø¯Ù…Ø¬ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ø¥Ù†ØªØ§Ø¬ ÙƒÙ„Ù…Ø§Øª Ø·ÙˆÙŠÙ„Ø©
        for(let i=0; i<5; i++){
            results.push(`${prefixes[i]} ${seed} ${suffixes[i]}`);
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        const div = document.getElementById('kwOutput');
        div.innerHTML = results.map(k => `
            <div class="kw-tag">
                <span>${k}</span>
                <span class="kw-copy" onclick="navigator.clipboard.writeText('${k}')">ğŸ“‹</span>
            </div>
        `).join('');
    }

    // --- UTILS ---
    function draw(cid, sid, v){
        document.getElementById(sid).innerText = v;
        new Chart(document.getElementById(cid), {
            type:'doughnut',
            data:{datasets:[{data:[v,100-v], backgroundColor:[v>=90?'#27ae60':v>=50?'#f39c12':'#c0392b','#eee'], borderWidth:0}]},
            options:{cutout:'75%', events:[]}
        });
    }

    function pdf(){
        const b = event.target; b.innerText="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";
        html2canvas(document.getElementById('printArea'), {scale:2}).then(c=>{
            const p = new window.jspdf.jsPDF('p','mm','a4');
            p.addImage(c.toDataURL('image/png'),'PNG',0,0,210,(c.height*210)/c.width);
            p.save('Kemet-Executive-Report.pdf');
            b.innerText="ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± (PDF)";
        });
    }
</script>

</body>
  </html>
  
