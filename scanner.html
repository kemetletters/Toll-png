<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Kemet Scan PRO ‚Äì Deep SEO Audit</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --good:#0cce6b;--avg:#ffa400;--poor:#ff4e42;--primary:#2c3e50;--bg:#f3f4f6;
}
body{font-family:tahoma;background:var(--bg);margin:0;padding:20px;color:#333}
.container{max-width:900px;margin:auto}
.box{background:#fff;border-radius:12px;padding:20px;margin-bottom:15px}
input,select,button{width:100%;padding:12px;font-size:15px;border-radius:8px;border:1px solid #ccc;margin-bottom:8px}
button{background:var(--primary);color:#fff;font-weight:bold;cursor:pointer}
.row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #eee;font-size:14px}
.badge{padding:3px 8px;border-radius:4px;color:#fff;font-size:11px;font-weight:bold}
.g{background:var(--good)} .y{background:var(--avg);color:#333} .r{background:var(--poor)}
.metrics{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
@media(max-width:600px){.metrics{grid-template-columns:repeat(2,1fr)}}
.metric{text-align:center;background:#fff;border-radius:10px;padding:10px}
canvas{max-width:80px;margin:auto}
h3,h4{margin:5px 0}
.loader{text-align:center;padding:30px;display:none}
</style>
</head>

<body>
<div class="container">

<div class="box">
<h3>‚ö° Kemet Scan PRO ‚Äì Deep SEO</h3>
<input id="apiKey" placeholder="Google API Key">
<input id="url" placeholder="example.com">
<select id="strategy">
  <option value="mobile">üì± Mobile</option>
  <option value="desktop">üñ•Ô∏è Desktop</option>
</select>
<button onclick="scan()">üöÄ Start Scan</button>
</div>

<div id="loader" class="loader">‚è≥ Scanning...</div>
<div id="output"></div>

</div>

<script>
async function scan(){
  let key=apiKey.value.trim(), u=url.value.trim();
  if(!key||!u) return alert("API Key + URL");
  if(!u.startsWith("http")) u="https://"+u;
  loader.style.display="block";
  output.innerHTML="";
  const api=`https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url=${u}&key=${key}&strategy=${strategy.value}&category=PERFORMANCE&category=SEO&category=ACCESSIBILITY&category=BEST_PRACTICES`;
  try{
    let r=await fetch(api); let j=await r.json();
    if(j.error) throw j.error.message;
    render(j.lighthouseResult);
  }catch(e){alert(e)}
  loader.style.display="none";
}

function grade(v){
  if(v>=90) return ["A","g"];
  if(v>=75) return ["B","g"];
  if(v>=60) return ["C","y"];
  if(v>=40) return ["D","y"];
  return ["F","r"];
}

function draw(id,val){
  new Chart(document.getElementById(id),{
    type:"doughnut",
    data:{datasets:[{data:[val,100-val],backgroundColor:[val>=90?"#0cce6b":val>=50?"#ffa400":"#ff4e42","#eee"],borderWidth:0}]},
    options:{cutout:"75%",plugins:{legend:false,tooltip:false}}
  });
}

function row(label,a){
  if(!a) return "";
  let s=a.score||0;
  let c=s>=.9?"g":s>=.5?"y":"r";
  let t=s>=.9?"PASS":s>=.5?"WARN":"FAIL";
  return `<div class="row"><span>${label}</span><div><b>${a.displayValue||""}</b> <span class="badge ${c}">${t}</span></div></div>`;
}

function render(lh){
  const a=lh.audits;
  const p=Math.round(lh.categories.performance.score*100);
  const s=Math.round(lh.categories.seo.score*100);
  const ac=Math.round(lh.categories.accessibility.score*100);
  const b=Math.round(lh.categories['best-practices'].score*100);
  const final=Math.round(p*0.4+s*0.3+ac*0.15+b*0.15);
  const g=grade(final);

  output.innerHTML=`
  <div class="box">
    <h3>Final Score: ${final}/100 <span class="badge ${g[1]}">${g[0]}</span></h3>
    <div class="metrics">
      <div class="metric"><canvas id="c1"></canvas><small>Performance ${p}</small></div>
      <div class="metric"><canvas id="c2"></canvas><small>SEO ${s}</small></div>
      <div class="metric"><canvas id="c3"></canvas><small>Accessibility ${ac}</small></div>
      <div class="metric"><canvas id="c4"></canvas><small>Best ${b}</small></div>
    </div>
  </div>

  <div class="box">
    <h4>üîé Deep SEO Audit</h4>
    ${row("Title Tag",a['document-title'])}
    ${row("Meta Description",a['meta-description'])}
    ${row("Canonical",a['canonical-link'])}
    ${row("Indexable",a['is-crawlable'])}
    ${row("HTTPS",a['is-on-https'])}
    ${row("Robots.txt",a['robots-txt'])}
    ${row("Hreflang",a['hreflang'])}
    ${row("Structured Data",a['structured-data'])}
    ${row("Image ALT",a['image-alt'])}
    ${row("Viewport",a['viewport'])}
  </div>

  <div class="box">
    <h4>üí° Smart Recommendations</h4>
    <ul>
      ${tips(a)}
    </ul>
  </div>
  `;

  draw("c1",p); draw("c2",s); draw("c3",ac); draw("c4",b);
}

function tips(a){
  let t=[];
  if(a['document-title'].score<1) t.push("ÿ™ÿ≠ÿ≥ŸäŸÜ Title (50‚Äì60 ÿ≠ÿ±ŸÅ)");
  if(a['meta-description'].score<1) t.push("ŸÉÿ™ÿßÿ®ÿ© Meta Description ÿ¨ÿ∞ÿßÿ®ÿ©");
  if(a['image-alt'].score<1) t.push("ÿ•ÿ∂ÿßŸÅÿ© ALT ŸÑŸÑÿµŸàÿ±");
  if(a['structured-data'].score<1) t.push("ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Schema Markup");
  if(a['is-on-https'].score<1) t.push("ÿ™ŸÅÿπŸäŸÑ HTTPS");
  if(a['robots-txt'].score<1) t.push("ŸÖÿ±ÿßÿ¨ÿπÿ© robots.txt");
  return t.map(x=>`<li>${x}</li>`).join("");
}
</script>

</body>
</html>
